{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// const API_URL = import.meta.env.VITE_API_URL;\n// const token = import.meta.env.VITE_API_TOKEN;\n\nconst API_URL = 'http://localhost:8000/api/v1';\nconst token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjI0OTcyMjYwfQ.X31cryg_A126WLYT96PD-SLLFWSxb2SeoQZ4cvx3VhU';\nexport const fetchMovies = createAsyncThunk('movies/fetchMovies', async () => {\n  const res = await axios.get(`${API_URL}/movies`, {\n    headers: {\n      Authorization: token\n    }\n  });\n  console.log('API response:', res.data);\n  return res.data;\n});\nexport const addMovie = createAsyncThunk('movies/addMovie', async movie => {\n  const res = await axios.post(`${API_URL}/movies`, movie);\n  return res.data;\n});\nexport const deleteMovie = createAsyncThunk('movies/deleteMovie', async id => {\n  await axios.delete(`${API_URL}/movies/${id}`);\n  return id;\n});\nconst movieSlice = createSlice({\n  name: 'movies',\n  initialState: {\n    movies: [],\n    status: 'idle',\n    searchTitle: '',\n    searchActor: ''\n  },\n  reducers: {\n    setSearchTitle(state, action) {\n      state.searchTitle = action.payload;\n    },\n    setSearchActor(state, action) {\n      state.searchActor = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchMovies.fulfilled, (state, action) => {\n      console.log('fetchMovies payload:', action.payload);\n      state.movies = action.payload.movies;\n      state.status = 'succeeded';\n    }).addCase(addMovie.fulfilled, (state, action) => {\n      console.log('addMovie payload:', action.payload);\n      state.movies.push(action.payload);\n    }).addCase(deleteMovie.fulfilled, (state, action) => {\n      state.movies = state.movies.filter(m => m.id !== action.payload);\n    });\n  }\n});\nexport const {\n  setSearchTitle,\n  setSearchActor\n} = movieSlice.actions;\nexport default movieSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","API_URL","token","fetchMovies","res","get","headers","Authorization","console","log","data","addMovie","movie","post","deleteMovie","id","delete","movieSlice","name","initialState","movies","status","searchTitle","searchActor","reducers","setSearchTitle","state","action","payload","setSearchActor","extraReducers","builder","addCase","fulfilled","push","filter","m","actions","reducer"],"sources":["/Users/MacBook/Documents/GitHub/React/Task-test/src/redux/MovieSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// const API_URL = import.meta.env.VITE_API_URL;\n// const token = import.meta.env.VITE_API_TOKEN;\n\nconst API_URL = 'http://localhost:8000/api/v1';\nconst token =\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjI0OTcyMjYwfQ.X31cryg_A126WLYT96PD-SLLFWSxb2SeoQZ4cvx3VhU';\n\nexport const fetchMovies = createAsyncThunk('movies/fetchMovies', async () => {\n  const res = await axios.get(`${API_URL}/movies`, {\n    headers: {\n      Authorization: token,\n    },\n  });\n  console.log('API response:', res.data);\n\n  return res.data;\n});\n\nexport const addMovie = createAsyncThunk('movies/addMovie', async movie => {\n  const res = await axios.post(`${API_URL}/movies`, movie);\n  return res.data;\n});\n\nexport const deleteMovie = createAsyncThunk('movies/deleteMovie', async id => {\n  await axios.delete(`${API_URL}/movies/${id}`);\n  return id;\n});\n\nconst movieSlice = createSlice({\n  name: 'movies',\n  initialState: {\n    movies: [],\n    status: 'idle',\n    searchTitle: '',\n    searchActor: '',\n  },\n  reducers: {\n    setSearchTitle(state, action) {\n      state.searchTitle = action.payload;\n    },\n    setSearchActor(state, action) {\n      state.searchActor = action.payload;\n    },\n  },\n  extraReducers: builder => {\n    builder\n      .addCase(fetchMovies.fulfilled, (state, action) => {\n        console.log('fetchMovies payload:', action.payload);\n        state.movies = action.payload.movies;\n        state.status = 'succeeded';\n      })\n      .addCase(addMovie.fulfilled, (state, action) => {\n        console.log('addMovie payload:', action.payload);\n        state.movies.push(action.payload);\n      })\n      .addCase(deleteMovie.fulfilled, (state, action) => {\n        state.movies = state.movies.filter(m => m.id !== action.payload);\n      });\n  },\n});\n\nexport const { setSearchTitle, setSearchActor } = movieSlice.actions;\nexport default movieSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACA;;AAEA,MAAMC,OAAO,GAAG,8BAA8B;AAC9C,MAAMC,KAAK,GACT,qHAAqH;AAEvH,OAAO,MAAMC,WAAW,GAAGJ,gBAAgB,CAAC,oBAAoB,EAAE,YAAY;EAC5E,MAAMK,GAAG,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAE,GAAEJ,OAAQ,SAAQ,EAAE;IAC/CK,OAAO,EAAE;MACPC,aAAa,EAAEL;IACjB;EACF,CAAC,CAAC;EACFM,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEL,GAAG,CAACM,IAAI,CAAC;EAEtC,OAAON,GAAG,CAACM,IAAI;AACjB,CAAC,CAAC;AAEF,OAAO,MAAMC,QAAQ,GAAGZ,gBAAgB,CAAC,iBAAiB,EAAE,MAAMa,KAAK,IAAI;EACzE,MAAMR,GAAG,GAAG,MAAMJ,KAAK,CAACa,IAAI,CAAE,GAAEZ,OAAQ,SAAQ,EAAEW,KAAK,CAAC;EACxD,OAAOR,GAAG,CAACM,IAAI;AACjB,CAAC,CAAC;AAEF,OAAO,MAAMI,WAAW,GAAGf,gBAAgB,CAAC,oBAAoB,EAAE,MAAMgB,EAAE,IAAI;EAC5E,MAAMf,KAAK,CAACgB,MAAM,CAAE,GAAEf,OAAQ,WAAUc,EAAG,EAAC,CAAC;EAC7C,OAAOA,EAAE;AACX,CAAC,CAAC;AAEF,MAAME,UAAU,GAAGnB,WAAW,CAAC;EAC7BoB,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE;IACZC,MAAM,EAAE,EAAE;IACVC,MAAM,EAAE,MAAM;IACdC,WAAW,EAAE,EAAE;IACfC,WAAW,EAAE;EACf,CAAC;EACDC,QAAQ,EAAE;IACRC,cAAcA,CAACC,KAAK,EAAEC,MAAM,EAAE;MAC5BD,KAAK,CAACJ,WAAW,GAAGK,MAAM,CAACC,OAAO;IACpC,CAAC;IACDC,cAAcA,CAACH,KAAK,EAAEC,MAAM,EAAE;MAC5BD,KAAK,CAACH,WAAW,GAAGI,MAAM,CAACC,OAAO;IACpC;EACF,CAAC;EACDE,aAAa,EAAEC,OAAO,IAAI;IACxBA,OAAO,CACJC,OAAO,CAAC7B,WAAW,CAAC8B,SAAS,EAAE,CAACP,KAAK,EAAEC,MAAM,KAAK;MACjDnB,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEkB,MAAM,CAACC,OAAO,CAAC;MACnDF,KAAK,CAACN,MAAM,GAAGO,MAAM,CAACC,OAAO,CAACR,MAAM;MACpCM,KAAK,CAACL,MAAM,GAAG,WAAW;IAC5B,CAAC,CAAC,CACDW,OAAO,CAACrB,QAAQ,CAACsB,SAAS,EAAE,CAACP,KAAK,EAAEC,MAAM,KAAK;MAC9CnB,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEkB,MAAM,CAACC,OAAO,CAAC;MAChDF,KAAK,CAACN,MAAM,CAACc,IAAI,CAACP,MAAM,CAACC,OAAO,CAAC;IACnC,CAAC,CAAC,CACDI,OAAO,CAAClB,WAAW,CAACmB,SAAS,EAAE,CAACP,KAAK,EAAEC,MAAM,KAAK;MACjDD,KAAK,CAACN,MAAM,GAAGM,KAAK,CAACN,MAAM,CAACe,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKY,MAAM,CAACC,OAAO,CAAC;IAClE,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEH,cAAc;EAAEI;AAAe,CAAC,GAAGZ,UAAU,CAACoB,OAAO;AACpE,eAAepB,UAAU,CAACqB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}